<?xml version="1.0" encoding="UTF-8"?>
<model xmlns="http://dbfound.googlecode.com/model" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://dbfound.googlecode.com/model https://raw.githubusercontent.com/nfwork/dbfound/master/tags/model.xsd">
	<query>
		<sql>
		 <![CDATA[
			SELECT
				u.user_id,
				u.user_name,
				u.user_code,
				u.create_date,
				u.create_by
			FROM user u
			#WHERE_CLAUSE#
		 ]]>
		</sql>
		<filter name="time_from" express="create_date &gt;= ${@time_from}" />
		<filter name="time_to" express="create_date &lt;= ${@time_to}" />
		<filter name="user_code" express="user_code like '#{@user_code}'" />
		<filter name="user_name" express="user_name like ${@user_name}" />
	</query>

	<execute name="add">
		<sqls>
			<collisionSql
				where="exists (select 1 from user where user_code= ${@user_code})"
				message="用户编号:#{@user_code} 已经使用！" />
			<executeSql>
			 <![CDATA[
			    INSERT INTO user
				   (user_code,
					user_name,
					password,
					create_by,
					create_date)
				VALUES
					(${@user_code},
					${@user_name},
					${@password},
					1,
					NOW())
			 ]]>
			</executeSql>
		</sqls>
	</execute>

	<execute name="update">
		<sqls>
			<executeSql>
			  <![CDATA[
				update user set
					user_name = ${@user_name},
					last_update_by = 1,
					last_update_date = NOW() 
				where user_id = ${@user_id}
			  ]]>
			</executeSql>
		</sqls>
	</execute>

	<execute name="delete">
		<sqls>
			<batchSql sourcePath="userList">
				<executeSql>
					<![CDATA[
						delete from user where user_id= ${@user_id}
					  ]]>
				</executeSql>
			</batchSql>
		</sqls>
	</execute>
</model>